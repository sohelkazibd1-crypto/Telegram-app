<!DOCTYPE html><html lang="bn" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Telegram Mini App â€“ Wallet Home</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="color-scheme" content="light dark" />
  <style>
    /* Fallback smoothness */
    .card { @apply rounded-2xl shadow p-4 bg-white/70 dark:bg-zinc-900/70 backdrop-blur; }
    .btn { @apply inline-flex items-center justify-center gap-2 rounded-xl px-3 py-2 text-sm font-medium shadow; }
    .btn-solid { @apply bg-indigo-600 text-white hover:bg-indigo-700 active:scale-[.98]; }
    .btn-ghost { @apply bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700; }
    .nav-item { @apply flex-1 text-center py-2 rounded-xl hover:bg-zinc-100 dark:hover:bg-zinc-800; }
  </style>
</head>
<body class="h-full bg-zinc-50 text-zinc-900 dark:bg-zinc-950 dark:text-zinc-100 transition-colors">
  <div class="max-w-md mx-auto p-4 space-y-4">
    <!-- Header -->
    <header class="flex items-center justify-between">
      <div class="flex items-center gap-3">
        <button id="profileBtn" class="relative">
          <img id="avatar" class="size-10 rounded-full ring-2 ring-zinc-200 dark:ring-zinc-700 object-cover" src="https://i.pravatar.cc/100?img=12" alt="à¦ªà§à¦°à§‹à¦«à¦¾à¦‡à¦²" />
          <input id="avatarInput" type="file" accept="image/*" class="hidden" />
        </button>
        <div>
          <div class="text-sm text-zinc-500">à¦¸à§à¦¬à¦¾à¦—à¦¤à¦®</div>
          <div class="font-semibold" id="displayName">à¦†à¦ªà¦¨à¦¾à¦° à¦¨à¦¾à¦®</div>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button id="modeToggle" class="btn btn-ghost" title="Dark/Light">
          <span id="modeIcon" aria-hidden>ğŸŒ™</span>
          <span class="sr-only">Toggle theme</span>
        </button>
        <button id="openSettings" class="btn btn-ghost" title="Settings">âš™ï¸</button>
      </div>
    </header><!-- Balance Card -->
<section class="card">
  <div class="text-sm text-zinc-500">ğŸ’° Balance</div>
  <div class="text-3xl font-bold" id="balance">à§³ 1,234.00</div>
  <div class="mt-4 flex gap-2">
    <button class="btn btn-solid flex-1" id="depositBtn">Deposit ğŸ’³</button>
    <button class="btn btn-ghost flex-1" id="withdrawBtn">Withdraw ğŸ’¸</button>
  </div>
</section>

<!-- Actions Grid -->
<section class="grid grid-cols-2 gap-3">
  <button class="card text-left">ğŸ“„ <span class="ml-2 font-semibold">Transactions</span></button>
  <button class="card text-left">ğŸ‘¥ <span class="ml-2 font-semibold">Invite Friends</span></button>
  <button class="card text-left">ğŸ“© <span class="ml-2 font-semibold">Inbox</span></button>
  <button class="card text-left">ğŸ® <span class="ml-2 font-semibold">Play Game</span></button>
  <button class="card text-left">ğŸ¯ <span class="ml-2 font-semibold">Offers</span></button>
  <button class="card text-left">ğŸ† <span class="ml-2 font-semibold">Levels / Achievements</span></button>
</section>

<!-- Level Strip -->
<section class="card">
  <div class="flex items-center justify-between text-sm">
    <span>ğŸ”“ Level: <span id="levelNow">3</span> / 5</span>
    <span>Next Unlock â†’ <span id="nextUnlock">Custom Theme ğŸ¨</span></span>
  </div>
  <div class="mt-3 h-2 rounded-full bg-zinc-200 dark:bg-zinc-800 overflow-hidden">
    <div id="levelBar" class="h-full bg-indigo-600" style="width: 60%"></div>
  </div>
</section>

<!-- Footer Nav -->
<nav class="sticky bottom-4 bg-white/80 dark:bg-zinc-900/80 backdrop-blur rounded-2xl shadow p-2">
  <ul class="flex gap-2 text-sm">
    <li class="nav-item">ğŸ  Home</li>
    <li class="nav-item">ğŸ’¬ Support</li>
    <li class="nav-item">ğŸ’¼ Wallet</li>
    <li class="nav-item">âš™ï¸ Settings</li>
  </ul>
</nav>

  </div>  <!-- Settings / Profile Mini Sheet -->  <dialog id="settingsDlg" class="rounded-2xl w-[92%] max-w-md p-0">
    <form method="dialog" class="card !shadow-none !rounded-2xl">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold">Settings</h2>
        <button class="btn btn-ghost">âœ–ï¸</button>
      </div>
      <div class="mt-3 space-y-4">
        <div>
          <label class="text-sm text-zinc-500">à¦¨à¦¾à¦®</label>
          <input id="nameInput" class="mt-1 w-full rounded-xl border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2" placeholder="à¦†à¦ªà¦¨à¦¾à¦° à¦¨à¦¾à¦® à¦²à¦¿à¦–à§à¦¨" />
        </div>
        <div class="flex items-center justify-between">
          <div>
            <div class="text-sm text-zinc-500">Theme</div>
            <div class="text-sm" id="themeLabel">System</div>
          </div>
          <div class="flex gap-2">
            <button type="button" data-theme="light" class="btn btn-ghost">Light</button>
            <button type="button" data-theme="dark" class="btn btn-ghost">Dark</button>
            <button type="button" data-theme="system" class="btn btn-ghost">System</button>
          </div>
        </div>
      </div>
      <div class="mt-4 flex gap-2">
        <button class="btn btn-ghost flex-1">Close</button>
        <button id="saveSettings" class="btn btn-solid flex-1" value="default">Save</button>
      </div>
    </form>
  </dialog>  <!-- Deposit / Withdraw Modal -->  <dialog id="txDlg" class="rounded-2xl w-[92%] max-w-md p-0">
    <form method="dialog" class="card !shadow-none !rounded-2xl">
      <div class="flex items-center justify-between">
        <h2 class="text-lg font-semibold" id="txTitle">Deposit</h2>
        <button class="btn btn-ghost">âœ–ï¸</button>
      </div>
      <div class="mt-3 space-y-3">
        <div>
          <label class="text-sm text-zinc-500">Amount (à§³)</label>
          <input id="txAmount" type="number" min="0" step="0.01" class="mt-1 w-full rounded-xl border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2" placeholder="1000" />
        </div>
        <div>
          <label class="text-sm text-zinc-500">Gateway</label>
          <select id="txGateway" class="mt-1 w-full rounded-xl border border-zinc-300 dark:border-zinc-700 bg-transparent px-3 py-2">
            <option value="bkash">bKash</option>
            <option value="nagad">Nagad</option>
            <option value="rocket">Rocket</option>
            <option value="crypto">Cryptocurrency</option>
          </select>
        </div>
      </div>
      <div class="mt-4 flex gap-2">
        <button class="btn btn-ghost flex-1">Cancel</button>
        <button id="txSubmit" class="btn btn-solid flex-1" value="default">Continue</button>
      </div>
    </form>
  </dialog>  <script>
    // --- Theme handling with localStorage ---
    const root = document.documentElement;
    const modeToggle = document.getElementById('modeToggle');
    const modeIcon = document.getElementById('modeIcon');
    const themeLabel = document.getElementById('themeLabel');

    function applyTheme(theme) {
      if (theme === 'dark') root.classList.add('dark');
      else if (theme === 'light') root.classList.remove('dark');
      else {
        // system
        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
        root.classList.toggle('dark', prefersDark);
      }
      localStorage.setItem('theme', theme);
      themeLabel && (themeLabel.textContent = theme.charAt(0).toUpperCase() + theme.slice(1));
      modeIcon.textContent = root.classList.contains('dark') ? 'â˜€ï¸' : 'ğŸŒ™';
    }

    const storedTheme = localStorage.getItem('theme') || 'system';
    applyTheme(storedTheme);

    modeToggle.addEventListener('click', () => {
      const isDark = root.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      modeIcon.textContent = isDark ? 'â˜€ï¸' : 'ğŸŒ™';
    });

    // Settings dialog + profile updates
    const settingsDlg = document.getElementById('settingsDlg');
    const openSettings = document.getElementById('openSettings');
    const saveSettings = document.getElementById('saveSettings');
    const nameInput = document.getElementById('nameInput');
    const displayName = document.getElementById('displayName');

    openSettings.addEventListener('click', () => {
      nameInput.value = displayName.textContent === 'à¦†à¦ªà¦¨à¦¾à¦° à¦¨à¦¾à¦®' ? '' : displayName.textContent;
      settingsDlg.showModal();
    });

    // Theme quick buttons inside settings
    settingsDlg.addEventListener('click', (e) => {
      if (e.target.matches('button[data-theme]')) {
        applyTheme(e.target.getAttribute('data-theme'));
      }
    });

    saveSettings.addEventListener('click', (e) => {
      e.preventDefault();
      const name = nameInput.value.trim();
      if (name) {
        displayName.textContent = name;
        localStorage.setItem('name', name);
      }
      settingsDlg.close();
    });

    // Load saved name
    const savedName = localStorage.getItem('name');
    if (savedName) displayName.textContent = savedName;

    // Avatar upload
    const profileBtn = document.getElementById('profileBtn');
    const avatarInput = document.getElementById('avatarInput');
    const avatarImg = document.getElementById('avatar');

    profileBtn.addEventListener('click', () => avatarInput.click());
    avatarInput.addEventListener('change', (e) => {
      const file = e.target.files?.[0];
      if (!file) return;
      const url = URL.createObjectURL(file);
      avatarImg.src = url;
      // Persist small images via FileReader (base64)
      const reader = new FileReader();
      reader.onload = () => localStorage.setItem('avatar', reader.result);
      reader.readAsDataURL(file);
    });

    const savedAvatar = localStorage.getItem('avatar');
    if (savedAvatar) avatarImg.src = savedAvatar;

    // Deposit / Withdraw flow (mock)
    const txDlg = document.getElementById('txDlg');
    const txTitle = document.getElementById('txTitle');
    const depositBtn = document.getElementById('depositBtn');
    const withdrawBtn = document.getElementById('withdrawBtn');
    const txSubmit = document.getElementById('txSubmit');
    const txAmount = document.getElementById('txAmount');
    const txGateway = document.getElementById('txGateway');
    const balanceEl = document.getElementById('balance');

    function getBalance() {
      return parseFloat(localStorage.getItem('balance') || '1234');
    }
    function setBalance(v) {
      localStorage.setItem('balance', v.toString());
      balanceEl.textContent = 'à§³ ' + v.toFixed(2);
    }
    setBalance(getBalance());

    depositBtn.addEventListener('click', () => { txTitle.textContent = 'Deposit'; txDlg.showModal(); txSubmit.dataset.mode = 'deposit'; });
    withdrawBtn.addEventListener('click', () => { txTitle.textContent = 'Withdraw'; txDlg.showModal(); txSubmit.dataset.mode = 'withdraw'; });

    txSubmit.addEventListener('click', (e) => {
      e.preventDefault();
      const amt = parseFloat(txAmount.value || '0');
      if (!(amt > 0)) return txDlg.close();
      const mode = txSubmit.dataset.mode;
      let bal = getBalance();
      if (mode === 'deposit') bal += amt; else bal = Math.max(0, bal - amt);
      setBalance(bal);
      // Mock request payload (can be hooked to real API)
      const payload = { type: mode, amount: amt, gateway: txGateway.value, ts: Date.now() };
      console.log('TX â†’', payload);
      // Clear + close
      txAmount.value = '';
      txDlg.close();
      alert(`${mode === 'deposit' ? 'Deposit' : 'Withdraw'} request sent!`);
    });

    // Level progress (mock values)
    const levelNow = document.getElementById('levelNow');
    const levelBar = document.getElementById('levelBar');
    const nextUnlock = document.getElementById('nextUnlock');

    const levelData = {
      level: parseInt(localStorage.getItem('level') || '3'),
      progress: parseInt(localStorage.getItem('progress') || '60'), // percent
      next: localStorage.getItem('next') || 'Custom Theme ğŸ¨',
    };

    function renderLevel() {
      levelNow.textContent = levelData.level;
      levelBar.style.width = `${Math.max(0, Math.min(100, levelData.progress))}%`;
      nextUnlock.textContent = levelData.next;
    }
    renderLevel();

    // --- Minimal Telegram WebApp bootstrapping (safe to ignore outside Telegram) ---
    try {
      if (window.Telegram && window.Telegram.WebApp) {
        const tg = window.Telegram.WebApp;
        tg.ready();
        // Optional: adapt theme based on Telegram color scheme
        const themeParams = tg.themeParams || {};
        if (themeParams.bg_color) {
          document.body.style.backgroundColor = `#${themeParams.bg_color}`;
        }
      }
    } catch (err) { console.debug('Telegram WebApp init skipped', err); }
  </script></body>
</html>